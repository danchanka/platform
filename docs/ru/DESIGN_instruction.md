---
title: 'Инструкция DESIGN'
---

Инструкция **DESIGN** - изменение [дизайна формы](Form_design.md).

### Синтаксис

Синтаксис представляет собой вложенные друг в друга блоки *инструкций дизайна.* Внешний блок, начинающийся с ключевого слова **DESIGN**, определяет [форму](Forms.md), дизайн которой будет изменяться: 

    DESIGN formName [caption] [CUSTOM] {
        designStatement1
        ...
        designStatementN
    }

Каждый *designStatement *описывает одну инструкцию дизайна. Инструкции дизайна бывают следующих типов: 

    NEW name [insertPos] [{...}];
    MOVE selector [insertPos] [{...}];  
    selector [{...}];   
    REMOVE selector;
    propertyName = value;

Первые три инструкции: *создание* (**NEW**), *перемещение* (**MOVE**) и *редактирование *могут в свою очередь содержать вложенные блоки инструкций дизайна. Инструкции дизайна *удаление* (**REMOVE**) и *изменение значения свойства* (**=**) являются простыми одиночными инструкциями. Каждая инструкция навигатора должна завершаться точкой с запятой, если в ней не содержится вложенный блок инструкций.

Каждый *selector* может быть одного из следующих типов:

    componentName
    PROPERTY(formPropertyName)
    FILTERGROUP(filterGroupName)
    PARENT(selector)
    GROUP([propertyGroupSelector][,groupObjectTreeSelector])
    noGroupObjectTreeContainerType
    groupObjectTreeContainerType(groupObjectTreeSelector)

В свою очередь, *groupObjectTreeSelector* может быть одного из двух видов:

    groupObjectSelector
    TREE treeSelector

### Описание

При помощи инструкции **DESIGN** разработчик может управлять [дизайном](Form_design.md) [и](Interactive_view.md)нтерактивного представления формы путем создания, перемещения и удаления контейнеров и компонент, а также задания им определенных свойств. По умолчанию для каждой формы создается [дизайн по умолчанию](Form_design.md#defaultDesign) вместе с соответствующими контейнерами. При необходимости можно пересоздать дизайн без созданных по умолчанию контейнеров и выполненных ранее настроек. Осуществляется это с помощью ключевого слова **CUSTOM**.  

Каждый блок инструкций дизайна, заключенный в фигурные скобки, позволяет изменять некоторый компонент и его потомков, будем называть этот компонент *текущим компонентом* либо *текущим контейнером, *если нам известно, что компонент в данной ситуации должен являться контейнером. Во внешнем блоке, идущем после ключевого слова **DESIGN, **текущим компонентом является контейнер **main**. Существует следующие виды инструкций дизайна:

-   *Инструкция создания* (**NEW**) позволяет создать новый контейнер, делая его потомком текущего контейнера. Текущим компонентом в блоке инструкций дизайна, содержащемся в этой инструкции, будет являться созданный контейнер.
-   *Инструкция перемещения* (**MOVE**) позволяет сделать некоторый существующий компонент непосредственным потомком текущего контейнера. Предварительно этот компонент удаляется из предыдущего родительского контейнера. Текущим компонентом в блоке инструкций дизайна, содержащемся в этой инструкции, будет являться перемещаемый компонент. 
-   *Инструкция редактирования* позволяет изменить указанный компонент, который должен являться потомком (не обязательно непосредственным) текущего контейнера. Текущим компонентом в блоке инструкций дизайна, содержащемся в этой инструкции, будет являться указанный элемент.
-   *Инструкция удаления* (**REMOVE**) позволяет удалить указанный компонент из иерархии компонентов. Удаляемый компонент должен являться потомком текущего контейнера. 
-   *Инструкция изменения значения свойства* (**=**) позволяет изменить значение указанного свойства текущего компонента.

Иерархия компонент, описываемая в рамках одной инструкции, может иметь произвольный уровень вложенности и описывать любое количество компонентов и их свойств на каждом из уровней.

Для обращения к компонентам дизайна можно использовать их имя, а также обращаться к компонентам свойств на форме (**PROPERTY**), родительскому компоненту (**PARENT**), контейнерам групп свойств (**GROUP**) и другим базовым компонентам / компонентам дизайна по умолчанию.

### Параметры

### *Общие параметры*

*formName*

Имя изменяемой формы. [Составной идентификатор](IDs.md#cid-broken).* *

*caption*

Новый заголовок формы в интерактивном режиме отображения. [Строковый литерал](Literals.md#strliteral-broken). В [навигаторе](Navigator.md) заголовок формы при этом не изменяется.

*name*

Имя создаваемого контейнера. [Простой идентификатор](IDs.md#id-broken).

*insertPos*

Позиция вставки или перемещения компонента. Задается одним из следующих вариантов:*  
*

**BEFORE** selector

**AFTER** selector 

Указание того, что компонент должен быть добавлен или перенесен до (**BEFORE**) или после (**AFTER**) указанного компонента. Указанный компонент должен быть непосредственным потомком текущего контейнера. 

**FIRST**

Ключевое слово, которое указывает на то, что компонент должен быть добавлен или перенесен на первое место в списке потомков текущего контейнера. 

*propertyName*

Имя свойства компонента. Список существующих свойств перечислен в таблицах ниже.

*value*

Значение, присваиваемое соответствующему свойству контейнера. Допустимый тип значения можно посмотреть в таблицах ниже.

### *Свойства компонентов*

|Имя свойства|Описание|Вид значения|Значение по умолчанию|Примеры|
|---|---|---|---|---|
|size|Базовый размер компонента в пикселях (значение -1 означает, что размер не установлен)|Пара [целочисленных литералов](Literals.md#intliteral-broken) (ширина, высота)|(-1, -1)|(100, 20)|
|height|Базовый размер компонента по высоте в пикселях.|Целочисленный литерал|-1|50|
|width|Базовый размер компонента по ширине в пикселях.|Целочисленный литерал|-1|20|
|<p>background</p>|<p>Цвет, который будет использоваться для отображения фона компонента</p>|[Литерал класса <strong>COLOR</strong>](Literals.md#colorliteral-broken)|#FFFFFF|#FFFFCC, RGB(255, 0, 0)|
|foreground|Цвет, который будет использоваться для отображения текста компонента|Цвет |<strong>NULL</strong>|#FFFFCC, RGB(255, 0, 0)|
|font|<p>Шрифт, который будет использоваться для отображения текста компонента, например, значения свойства, заголовка действия, текста в таблице</p>|[Строковый литерал](Literals.md#strliteral-broken)|зависит от компонента|'Tahoma bold 16', 'Times 12'|
|fontSize|Размер шрифта, который будет использоваться для отображения текста компонента|Числовой литерал|зависит от компонента|10|
|fontStyle|Стиль шрифта, который будет использоваться для отображения текста компонента. Может содержать слова 'bold' и/или 'italic', либо пустую строку|Строковый литерал|''|'bold', 'bold italic'|
|defaultComponent|<p>Указание того, что на данный компонент должен быть выставлен фокус при инициализации формы. Может быть установлен только для одного компонента на всей форме</p>|Дополненный [логический литерал](Literals.md#booleanliteral-broken)|<strong>FALSE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|align, alignment|Способ выравнивания компонента внутри контейнера. Допустимые значения: <strong>START</strong> (В начале), <strong>CENTER</strong> (В центре), <strong>END</strong> (В конце), <strong>STRETCH</strong> (Растянуть).|Тип выравнивания|<strong>START</strong>|<strong>STRETCH</strong>|
|flex|Коэффициент расширения. Значение свойства, аналогичного свойству [CSS flex-grow](http://www.w3schools.com/cssref/css3_pr_flex-grow.asp). Задает насколько компонент должен расти в размерах относительно других компонентов|[Литерал типа <strong>NUMERIC</strong>](Literals.md#numericliteral-broken)|0|0.25|
|fill|Аналогично свойству *flex*, но кроме того, если устанавливается нулевое значение, то свойство *align* устанавливается в <strong>START</strong>, иначе *align* устанавливается в <strong>STRETCH</strong>|Литерал типа <strong>NUMERIC</strong>|0|<p>1.5</p>|
|noSort |Запрет сортировки|[Логический литерал](Literals.md#booleanliteral-broken)|<strong>FALSE</strong>|<p><strong>TRUE</strong>, <strong>FALSE</strong></p>|
|defaultCompare|Фильтр по умолчанию. Допустимые значения: <strong>EQUALS</strong>, <strong>GREATER</strong>, <strong></strong> <strong>LESS</strong>, <strong></strong> <strong>GREATER_EQUALS</strong>, <strong></strong> <strong>LESS_EQUALS</strong>, <strong>NOT_EQUALS</strong>, <strong>START_WITH</strong>, <strong>CONTAINS</strong>, <strong></strong> <strong>ENDS_WITH</strong>, <strong>LIKE.</strong>|Строковый литерал|<strong>CONTAINS</strong>|<p><strong>START_WITH</strong></p>|
|marginTop|Отступ сверху|Целочисленный литерал|0|3|
|marginRight|Отступ справа|Целочисленный литерал|0|1|
|marginBottom|Отступ снизу|Целочисленный литерал|0|4|
|marginLeft|Отступ слева|Целочисленный литерал|0|1|
|margin|Отступ. Устанавливает одинаковое значение свойствам *marginTop*, *marginRight*, *marginBottom*, *marginLeft*|Целочисленный литерал|0|5|

### *Свойства контейнеров*

|Имя свойства|Описание|Вид значения|Значение по умолчанию|Примеры|
|---|---|---|---|---|
|caption|Заголовок контейнера|Строковый литерал|<strong>NULL</strong>|'Заголовок'|
|type|<p>Тип контейнера. Допустимые значения:</p><br/><p><strong>CONTAINERV</strong> - вертикальный контейнер</p><br/><p><strong>CONTAINERH</strong> - горизонтальный контейнер</p><br/><p><strong>COLUMNS</strong> - колоночный контейнер</p><br/><p><strong>SPLITV</strong> - вертикальный сплиттер</p><br/><p><strong>SPLITH</strong> - горизонтальный сплиттер</p><br/><p><strong>TABBED</strong> - панель закладок</p><br/><p><strong>SCROLL</strong> - контейнер с прокруткой, должен иметь не более одного непосредственного потомка</p>|Тип контейнера|<strong>CONTAINERV</strong>|<strong>CONTAINERH, TABBED</strong>|
|childrenAlignment|Способ выравнивания дочерних компонентов внутри контейнера. Допустимые значения: <strong>START</strong>, <strong>CENTER</strong>, <strong>END</strong>|Тип выравнивания|<strong>START</strong>|<strong>CENTER</strong>|
|columns|Количество колонок в контейнере типа <strong>COLUMNS</strong>|Целочисленный литерал|4|3|
|columnLabelsWidth|Ширина заголовков компонентов в контейнере типа <strong>COLUMNS</strong>|Целочисленный литерал|0|50|
|showIf|Указание условия, при котором контейнер будет отображаться|[Выражение](Expression.md)|<strong>NULL</strong>|isLeapYear(date), hasComplexity(a, b)|

### *Свойства свойств и действий на форме*

|Имя свойства|Описание|Вид значения|Значение по умолчанию|Примеры|
|---|---|---|---|---|
|caption|Заголовок свойства или действия|Строковый литерал|caption свойства или действия|'Заголовок'|
|askConfirm|Указание того, что при попытке редактирования свойства (выполнении действия) будет выполнен запрос на подтверждение|Дополненный логический литерал|<strong>FALSE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|askConfirmMessage|Текст вопроса о подтверждении редактирования свойства (выполнении редактирования)|Строковый литерал|сообщение по умолчанию|'Вы действительно хотите изменить это свойство?'|
|autoSize|Автоматическое определение размера для компонента. Применяется только для текстовых компонентов|Дополненный логический литерал|<strong>FALSE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|valueWidth|Ширина ячейки значения свойства в пикселях|Целочисленный литерал|зависит от свойства|100|
|charWidth|Ширина ячейки значения свойства в символах|Целочисленный литерал|зависит от свойства|10|
|charHeight|Высота ячейки значения свойства в символах (рядах).|Целочисленный литерал|зависит от свойства|2, 3|
|clearText|Указание того, что в начале редактирования свойства должен сбрасываться текущий текст|Дополненный логический литерал|<strong>FALSE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|echoSymbols|Указание того, что вместо значения свойства будет показываться набор символов '*'. Используется, например, для паролей|Дополненный логический литерал|<strong>FALSE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|changeKey|<p>Клавиша, при нажатии которой будет начато редактирование свойства. Принцип задания аналогичен заданию параметра в [Keystroke.getKeystroke(String)](https://docs.oracle.com/javase/8/docs/api/javax/swing/KeyStroke.html#getKeyStroke-java.lang.String-)</p>|Строковый литерал|<strong>NULL</strong>|'ctrl F6', 'BACK_SPACE', 'alt shift X'|
|showChangeKey|Указание того, что в заголовок свойства будет включено название сочетания клавиш, по которому будет начато редактирование|Дополненный логический литерал|<strong>TRUE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|editOnSingleClick|Указание того, что при однократном нажатии мышкой на компонент свойства, необходимо начинать редактирование|Дополненный логический литерал|зависит от свойства|<strong>TRUE</strong>, <strong>FALSE</strong>|
|focusable|Указание того, что компонент свойства (действия) или колонка в таблице могут владеть фокусом|Дополненный логический литерал|changeKey = <strong>NULL</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|captionFont|Шрифт, который будет использоваться для отображения заголовка свойства|Строковый литерал|зависит от компонента|'Tahoma bold italic 16', 'Times 12'|
|hide|Указание того, что компонент свойства (действия) должен быть всегда спрятан|Дополненный логический литерал|<strong>FALSE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|imagePath|Путь к файлу с картинкой, которая будет отображаться в качестве иконки действия. Путь указывается относительно каталога <strong>images</strong>|Строковый литерал|<strong>NULL</strong>|'image.png', 'pring.png' |
|maxValue|Максимальное числовое значение, которое позволяет ввести компонент свойства|Целочисленный литерал|<strong>NULL</strong>|1000000, 5000000000L|
|notNull|Указание того, что в случае <strong>NULL</strong> значения свойства, компонент этого свойства должен быть подсвечен|Дополненный логический литерал|notNull свойства|<strong>TRUE</strong>, <strong>FALSE</strong>|
|panelCaptionAbove|<p>Указание того, что в панели необходимо рисовать заголовок компонента свойства или действия сверху от значения</p><br/><p>removed in 5.0, use panelCaptionVertical instead</p>|Дополненный логический литерал|<strong>FALSE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|panelCaptionVertical|Указание того, что в панели необходимо рисовать заголовок компонента свойства или действия сверху от значения|Дополненный логический литерал|<strong>FALSE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|<p>panelCaptionAfter</p>|Указание того, что в панели необходимо рисовать сначала значение, а потом заголовок свойства|Дополненный логический литерал|<strong>FALSE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|regexp|Регулярное выражение, которому должно соответствовать значение свойства при редактировании|Строковый литерал|<strong>NULL</strong>|'^((8\|\\+7)[\\- ]?)?(\\(?\\d\{3\}\\)?[\\- ]?)?[\\d\\- ]\{7,10\}$'|
|regexpMessage|Сообщение, которое будет выдано пользователю, если он введет значение не соответствующее регулярному выражению|Строковый литерал|сообщение по умолчанию|'Неправильный формат телефона'|
|<p>toolTip</p>|Подсказка, которая будет показываться при наведении пользователем мышки на заголовок свойства или действия|Строковый литерал|toolTip по умолчанию|'Подсказка'|
|pattern|Шаблон форматирования значения свойства. Синтаксис задания шаблона аналогичен синтаксису [DecimalFormat](https://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html) либо [SimpleDateFormat](https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html) в зависимости от типа значения|Строковый литерал|<strong>NULL</strong>|<pre><code>&#39;#,##0.00&#39;</code></pre>|

### *Свойства тулбара*

|Имя свойства|Описание|Вид значения|Значение по умолчанию|Примеры|
|---|---|---|---|---|
|showCalculateSum|Показывать кнопку подсчета суммы по колонке|Дополненный логический литерал|<strong>TRUE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|showCountQuantity|Показывать кнопку подсчета количества рядов|Дополненный логический литерал|<strong>TRUE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|showGroupChange|Показывать кнопку групповой корректировки|Дополненный логический литерал|<strong>TRUE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|showGroup|Показывать кнопку группировочного отчета|Дополненный логический литерал|<strong>TRUE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|showPrintGroup|Показывать кнопку печати таблицы|Дополненный логический литерал|<strong>TRUE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|showPrintGroupXls|Показывать кнопку экспорта таблицы в xls-формат|Дополненный логический литерал|<strong>TRUE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|showSettings|Показывать кнопку настройки таблицы|Дополненный логический литерал|<strong>TRUE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|

### *Другие свойства*

|Имя свойства|Действует для|Описание|Вид значения|Значение по умолчанию|Примеры|
|---|---|---|---|---|---|
|tabVertical|таблица|Указание того, что переход фокуса между ячейками будет осуществляться сверху вниз, а не слева направо|Дополненный логический литерал|<strong>FALSE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|quickSearch|таблица|Указание того, что в таблице будет осуществляться быстрый поиск элемента|Дополненный логический литерал|<strong>FALSE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|
|visible|пользовательский фильтр, дерево классов|Указание видимости компонента для задания пользовательских фильтров (дерева классов)|Дополненный логический литерал|<strong>TRUE</strong>|<strong>TRUE</strong>, <strong>FALSE</strong>|

### *Параметры selector*

*componentName*

Имя компонента дизайна. [Простой идентификатор](IDs.md#id-broken).

*formPropertyName *

[Имя свойства / действия на форме](Properties_and_actions_block.md#name-broken)*.*

*filterGroupName*

Имя [группы фильтров](Filters_and_sortings_block.md#filterName-broken). [Простой идентификатор](IDs.md#id-broken).

*propertyGroupSelector*

Имя [группы свойств / действий](Groups_of_properties_and_actions.md). [Простой идентификатор](IDs.md#id-broken).

*groupObjectSelector*

Имя [группы объектов на форме](Object_blocks.md#groupName-broken). [Простой идентификатор](IDs.md#id-broken).

*treeSelector*

Имя [дерева объектов на форме](Object_blocks.md#treeName-broken). [Простой идентификатор](IDs.md#id-broken).

*noGroupObjectTreeContainerType*

Тип контейнера формы:**  
**

-   **BOX** - общий контейнер формы
-   **PANEL** - содержит компоненты свойств, которые отображаются в панель (**PANEL**), и для которых группа отображения не определена.
-   **TOOLBARBOX** - общий контейнер тулбара.
-   **TOOLBARLEFT **- левая часть тулбара
-   **TOOLBARRIGHT** - правая часть тулбара
-   **TOOLBAR** - содержит компоненты свойств, которые отображаются в тулбар (TOOLBAR), и для которых группа отображения не определена.

*groupObjectTreeContainerType*

Тип контейнера группы объектов / дерева:

-   Все типы контейнера формы *noGroupObjectTreeContainerType* (семантика аналогична).
-   **GRIDBOX **- контейнер таблицы
-   **GRID **- компонент таблицы
-   **TOOLBARSYSTEM** - системный тулбар (количество записей, групповая корректировка и т.п.).
-   **FILTERGROUPS **- содержит компоненты групп фильтров
-   **USERFILTER **- компонет, который отображает пользовательские фильтры

 **Примеры**


```lsf
DESIGN order { // настраиваем дизайн формы, начиная с дизайна по умолчанию
    // отмечаем, что все изменения иерархии будут происходит для самого верхнего контейнера
    NEW orderPane FIRST { // создаем новый контейнер самым первым перед системными кнопками, в который положим два контейнера - шапка и спецификации
        fill = 1; // указываем, что контейнер должен занимать все доступное ему место
        type = SPLITV; // указываем, что контейнер будет вертикальным сплиттером
        MOVE BOX(o) { // переносим в новый контейнер все, что касается объекта o
            PANEL(o) { // настроим как отображаются свойства в панели объекта o
                type = CONTAINERV; // делаем, чтобы все потомки шли сверху вниз
                NEW headerRow1 { // создаем контейнер - первый ряд
                    type = CONTAINERH;
                    MOVE PROPERTY(date(o)) { // переносим свойство даты заказа
                        caption = 'Дата редактируемого заказа'; // "перегружаем" заголовок свойства в дизайне формы (вместо стандартного)
                        toolTip = 'Введите сюда дату, когда был сделан заказ'; //задаем подсказку для свойства дата заказа
                        background = #00FFFF; // делаем фон красным
                    }
                    MOVE PROPERTY(time(o)) { // переносим свойство времени заказа
                        foreground = #FF00FF; // делаем цвет зеленым
                    }
                    MOVE PROPERTY(number(o)) { // переносим свойство номер заказа
                        charWidth = 5; // ставим, что пользователю желательно должно показываться 5 символов
                    }
                    MOVE PROPERTY(series(o)); // переносим свойство серия заказа
                }
                NEW headerRow2 {
                    type = CONTAINERV; // потомки - сверху вниз
                }
                MOVE PROPERTY(note(o));
            }

            size = (400, 300); //указываем, что контейнер o.box должен иметь базовый размер 400x300 пикселей
        }
        NEW detailPane { // создаем контейнер, в котором будут хранится различные спецификации по заказу
            type = TABBED; // помечаем, что этот контейнер должен быть панелью закладок, где закладками являются его потомки
            MOVE BOX(d) { // добавляем контейнер с строками заказа как одну из закладок верхней панели
                caption = 'Строки'; // задаем заголовок панели закладки
                PROPERTY(index(d)) { focusable = FALSE; } // делаем, чтобы колонка с номером строки никогда не могла иметь фокус
                GRID(d) {
                    defaultComponent = TRUE; // делаем, чтобы по умолчанию фокус при открытии формы устанавливался на таблицу строк
                }
            }
            MOVE BOX(s) { // добавляем контейнер с итогами по sku как одну из закладок detailPane
                caption = 'Подбор';
            }
        }
    }
}

// разбиваем определение формы на две инструкции (вторую инструкцию можно перенести в другой модуль)
DESIGN order {
    REMOVE TOOLBARLEFT; // убираем из иерархии контейнер с кнопками печати и экспорта в xls, тем самым делая их невидимыми
}
```

На выходе получаем следующую форму :

![](attachments/4718609/43648025.png)
