---
title: 'Сессии изменений'
---

[Действия](Actions.md) в результате своего выполнения могут изменять состояние системы, в которой они выполняются. Записывать эти изменения сразу в базу данных не всегда желательно, как с точки зрения целостности, так и с точки зрения эргономики системы. Поэтому в платформе существует возможность накапливать эти изменения локально в *сессиях изменений.* 

Изменениями в сессии могут быть изменения [первичных](Data_properties_DATA_.md) свойств, в том числе локальных, а также изменения [классов](User_classes.md) объектов. Первые осуществляются действиями, созданными при помощи оператора [изменения свойства](Property_change_CHANGE_.md), вторые - при помощи операторов [добавления](New_object_NEW_.md) / [изменения класса](Class_change_CHANGECLASS_DELETE_.md) объектов.

Каждый раз, когда действие выполняется, в зависимости от контекста выполнения для него определяется *текущая* сессия. Например, если действие вызывается как обработчик некоторого события формы (наиболее частый случай), то текущей сессией для него будет сессия этой формы. Также, к примеру, текущая сессия может изменяться при использовании оператора [новой сессии](New_session_NEWSESSION_NESTEDSESSION_.md).

Если действие в процессе выполнения обращается к некоторому свойству, то его значение вычисляется с учетом изменений, сделанных в текущей сессии этого действия.

Для сессии поддерживаются две основные операции - [применение](Apply_changes_APPLY_.md) и [отмена](Cancel_changes_CANCEL_.md)*, *а также набор операторов для [работы с изменениями](Change_operators_SET_CHANGED_..._.md) (в том числе получением [предыдущего значения](Previous_value_PREV_.md) в сессии).

Отметим, что сессии изменений не является потокобезопасными, поэтому при использовании операторов, которые явно или неявно выполняют действия в новом потоке и при этом не блокируют свой поток выполнения, крайне не рекомендуется обращаться к текущей сессии после их выполнения (например такими "многопоточными" операторами являются операторы [нового потока](NEWTHREAD_operator.md) или [асинхронного](In_an_interactive_view_SHOW_DIALOG_.md#flow) [открытия формы](In_an_interactive_view_SHOW_DIALOG_.md)). В этом случае рекомендуется всегда создавать новую сессию.
